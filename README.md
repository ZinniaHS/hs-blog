# HS-Blog åšå®¢ç³»ç»Ÿ

# ğŸ“ é¡¹ç›®ç®€ä»‹

hs-blogæ˜¯ä¸€ä¸ªçº¿ä¸Šåšå®¢å¹³å°ï¼Œä¸€ä¸ªçŸ¥è¯†è®°å½•ï¼Œåˆ†äº«å¹³å°ã€‚åœ¨è¿™é‡Œï¼Œç”¨æˆ·å¯ä»¥åˆ†äº«è‡ªå·±ä¸ªäººçš„å­¦ä¹ ç¬”è®°ï¼Œç»éªŒï¼›åŒæ—¶å¹³å°æä¾›äº†ä¸€äº›ç”µå­ä¹¦ï¼Œä»¥å­¦ä¹ äº¤æµçš„ç›®çš„ä¾›ç”¨æˆ·é˜…è¯»ä¸å‚è€ƒã€‚

# 

### ğŸ”— é¡¹ç›®åœ°å€

**æœ¬é¡¹ç›®hs-blog**

**Github:** <a href="https://github.com/ZinniaHS/hs-blog" class="github-link">hs-blog</a>

**Gitee:** **ï¼ˆå¾…è¡¥å……ï¼‰**

**å®¢æˆ·ç«¯åœ¨çº¿ä½“éªŒ:** <a href="http://119.29.233.24/user/">hs-blogçº¿ä¸Šä½“éªŒ</a>

# 

**hs-blog-user-vue**

**å®¢æˆ·ç«¯çš„å‰ç«¯:** <a href="https://github.com/ZinniaHS/hs-blog-user-vue">hs-blog-user-vue</a>

# 

**hs-blog-admin-vue**

**ç®¡ç†å‘˜ç«¯çš„å‰ç«¯:** <a href="https://github.com/ZinniaHS/hs-blog-admin-vue">hs-blog-admin-vue</a>

# 

**é¡¹ç›®æŠ€æœ¯æ ˆï¼š**

**åç«¯ï¼š** Springboot, MybatisPlus, MySQL, Spring Security, JWT, Redis, Aliyun OSS

**å‰ç«¯ï¼š** Vue3+ElementPlus

**IDEï¼š** IDEA, WebStorm

**æœ¬é¡¹ç›®åˆ†ä¸ºä¸¤ç«¯ï¼šç®¡ç†å‘˜ç«¯ï¼Œå®¢æˆ·ç«¯ã€‚**

**ç®¡ç†å‘˜ç«¯ï¼š**

* ç®¡ç†å‘˜ç™»å½•
* åšå®¢çš„æŸ¥è¯¢ï¼Œå®¡æ ¸ï¼Œé”å®šï¼Œåˆ é™¤
* åšå®¢åˆ†ç±»çš„å¢åˆ æ”¹æŸ¥ã€‚
* å›¾ä¹¦çš„å¢åˆ æ”¹æŸ¥ã€‚
* å›¾ä¹¦åˆ†ç±»çš„å¢åˆ æ”¹æŸ¥ã€‚

**å®¢æˆ·ç«¯ï¼š**

* è®¿å®¢å¯ä»¥æ³¨å†Œç™»å½•
* ç”¨æˆ·å¯ä»¥å†™åšå®¢ï¼ŒæŸ¥è¯¢åšå®¢ï¼Œæ”¶è—åšå®¢ï¼Œåšå®¢è¯„è®ºï¼ˆå¾…å®Œæˆï¼‰
* å…³æ³¨åšä¸»ï¼Œè·å–å…³æ³¨åšä¸»çš„æ–‡ç« 
* æŸ¥è¯¢å›¾ä¹¦ï¼Œä¸‹è½½å›¾ä¹¦ï¼ŒåŠ å…¥æˆ‘çš„ä¹¦æ¶

# 

### ğŸ“¸ æ•´ä½“æ•ˆæœ

![é¡¹ç›®ä¸»ç•Œé¢æˆªå›¾](src/main/resources/static/images/frontend/Home.png)

# 

# ä»é›¶å¼€å§‹å¼€å‘é¡¹ç›®

é¦–å…ˆï¼Œæˆ‘å…ˆæ„Ÿè°¢æ„¿æ„çœ‹æˆ‘è¯¦ç»†è®²è§£é¡¹ç›®çš„æœ‹å‹ä»¬ï¼Œå¦‚æœä½ è§‰å¾—è¿™æ˜¯ä¸€ä¸ªä¸é”™çš„é¡¹ç›®ï¼Œæˆ–è€…ä»¥ä¸‹çš„æ•™ç¨‹æœ‰å“ªäº›åœ°æ–¹å¸®åŠ©åˆ°äº†ä½ ï¼Œå¸Œæœ›ä½ èƒ½å¤Ÿä¸åç»™æˆ‘ç‚¹ä¸€ä¸ªstarï¼Œä½ çš„staræ˜¯å¯¹æˆ‘çš„æœ€å¤§é¼“åŠ±ï¼

## è½¯ä»¶å¼€å‘æµç¨‹

åœ¨é¡¹ç›®å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆå¤ä¹ å›é¡¾ä¸€ä¸‹è½¯ä»¶å·¥ç¨‹å¯¼è®ºï¼Œäº†è§£ä¸€ä¸ªé¡¹ç›®çš„å¼€å‘æµç¨‹åº”è¯¥æ˜¯æ€ä¹ˆæ ·çš„ï¼Œè¿™æœ‰åŠ©äºæˆ‘ä»¬ä»å¤§æ–¹å‘ä¸ŠæŠŠæ¡ä¸€ä¸ªé¡¹ç›®çš„æ–¹å‘ã€‚

å¤§è‡´æ¥è¯´ï¼Œè½¯ä»¶å¼€å‘å¯ä»¥åˆ†ä¸ºè¿™ä¹ˆä¸€äº›æµç¨‹ï¼š**é—®é¢˜å®šä¹‰-> å¯è¡Œæ€§ç ”ç©¶ -> éœ€æ±‚åˆ†æ -> è½¯ä»¶è®¾è®¡ï¼ˆæ€»ä½“è®¾è®¡ï¼Œè¯¦ç»†è®¾è®¡ï¼‰ -> ç¨‹åºç¼–ç  -> æµ‹è¯•ï¼ˆå•å…ƒæµ‹è¯•ï¼Œé›†æˆæµ‹è¯•ï¼‰ -> è¿è¡Œä¸Šçº¿ -> ç»´æŠ¤ã€‚æ¥ä¸‹æ¥ä¼šä»¥æœ¬é¡¹ç›®ä¸ºä¾‹ï¼Œæ¥è¯´æ˜ä¸€ä¸‹å„ä¸ªæµç¨‹æ˜¯æ€ä¹ˆè¿›è¡Œçš„ã€‚

**1. é—®é¢˜å®šä¹‰ï¼Œå¯è¡Œæ€§ç ”ç©¶**

é¦–å…ˆè¦ç¡®å®šè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œå¹¶ä¸”æœ‰ä»€ä¹ˆæ ·çš„è§£å†³æ–¹æ³•èƒ½è¡Œå¾—é€šçš„ï¼Ÿæœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªé›†åˆåšå®¢åŠŸèƒ½çš„çŸ¥è¯†è®°å½•ï¼Œåˆ†äº«å¹³å°ï¼Œæ—¨åœ¨é€šè¿‡å®æˆ˜é¡¹ç›®æé«˜ç¼–ç¨‹æ°´å¹³ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡è¿™ä¸ªåšå®¢ç³»ç»Ÿè®°å½•è‡ªå·±çš„å­¦ä¹ å†ç¨‹ã€‚å¯è¡Œæ€§æ–¹é¢åœ¨ç¼–ç¨‹è§’åº¦æ˜¯å®Œå…¨å¯è¡Œçš„ã€‚

**2. éœ€æ±‚åˆ†æ**

ä¸ºäº†æ­å»ºä¸€ä¸ªçŸ¥è¯†è®°å½•ï¼Œåˆ†äº«å¹³å°ï¼Œç³»ç»Ÿåº”è¯¥åšä»€ä¹ˆï¼Œè¦ç¡®å®šç³»ç»Ÿå¿…é¡»å…·å¤‡å“ªäº›åŠŸèƒ½ã€‚

æœ¬é¡¹ç›®åˆ†ä¸ºä¾›ç®¡ç†å‘˜ç®¡ç†çš„ç®¡ç†ç«¯å’Œç”¨æˆ·ä½¿ç”¨çš„å®¢æˆ·ç«¯ã€‚ç®¡ç†å‘˜å¯ä»¥é€šè¿‡ç®¡ç†ç«¯å¯¹ç”¨æˆ·è´¦å·è¿›è¡Œç®¡ç†ï¼Œç”¨æˆ·å‘å¸ƒçš„åšå®¢è¿›è¡Œç®¡ç†ï¼ŒåŒæ—¶ä¸Šä¼ å›¾ä¹¦ä¿¡æ¯ç­‰åŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å¹³å°å‘å¸ƒè‡ªå·±çš„åšå®¢ï¼Œå¹¶ä¸”ä¸‹è½½å›¾ä¹¦è¿›è¡Œå­¦ä¹ äº¤æµã€‚

**ç®¡ç†å‘˜ç«¯ï¼š**

* ç®¡ç†å‘˜ç™»å½•
* åšå®¢çš„æŸ¥è¯¢ï¼Œå®¡æ ¸ï¼Œé”å®šï¼Œåˆ é™¤
* åšå®¢åˆ†ç±»çš„å¢åˆ æ”¹æŸ¥ã€‚
* å›¾ä¹¦çš„å¢åˆ æ”¹æŸ¥ã€‚
* å›¾ä¹¦åˆ†ç±»çš„å¢åˆ æ”¹æŸ¥ã€‚

**å®¢æˆ·ç«¯ï¼š**

* è®¿å®¢å¯ä»¥æ³¨å†Œç™»å½•
* ç”¨æˆ·å¯ä»¥å†™åšå®¢ï¼ŒæŸ¥è¯¢åšå®¢ï¼Œæ”¶è—åšå®¢ï¼Œåšå®¢è¯„è®ºï¼ˆå¾…å®Œæˆï¼‰
* å…³æ³¨åšä¸»ï¼Œè·å–å…³æ³¨åšä¸»çš„æ–‡ç« 
* æŸ¥è¯¢å›¾ä¹¦ï¼Œä¸‹è½½å›¾ä¹¦ï¼ŒåŠ å…¥æˆ‘çš„ä¹¦æ¶

ä»ä¸Šé¢è¿™äº›ç‚¹æ¥çœ‹ï¼Œæˆ‘ä»¬èƒ½å¤§æ¦‚äº†è§£åˆ°ä¸¤ä¸ªå¹³å°åº”è¯¥å®Œæˆä»€ä¹ˆäº‹æƒ…ã€‚

**3. è½¯ä»¶è®¾è®¡ï¼Œç¨‹åºç¼–ç **

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªçº¿ä¸Šç½‘ç«™ï¼Œä½¿ç”¨å‰åç«¯åˆ†ç¦»æ¨¡å¼å¼€å‘ï¼Œå‰ç«¯ä½¿ç”¨Vue3+ElementPlusï¼Œåç«¯ä½¿ç”¨Springboot+MybatisPlus+mysqlã€‚å„ä¸ªæ¨¡å—çš„è¯¦ç»†è®¾è®¡ä¸ç¼–ç ä¼šåœ¨åé¢çš„è®²è§£ä¸­è¯¦ç»†åˆ†äº«ã€‚

**4. æµ‹è¯•ä¸ä¸Šçº¿**

**ï¼ˆå¾…è¡¥å……ï¼‰**

# é¡¹ç›®è¯¦ç»†æ­å»ºè¿‡ç¨‹

åœ¨è¿™éƒ¨åˆ†å¼€å§‹ï¼Œä½œè€…ä¼šå°½åŠ›è¯¦ç»†çš„æè¿°è¿™ä¸ªé¡¹ç›®æ˜¯å¦‚ä½•æ­å»ºçš„ï¼Œå¦‚æœä½ ä»ä¸­å—åˆ°äº†å¯å‘ï¼Œå¾—åˆ°äº†å¸®åŠ©ï¼Œè¯·ç‚¹ä¸ªstaræ”¯æŒæˆ‘ï¼

## å‰ç«¯åˆå§‹æ­å»º

å‰ç«¯æ€»çš„æ¥çœ‹åº”è¯¥åŒ…å«ä¸¤ä¸ªå¹³å°ï¼Œä¸€æ˜¯æä¾›ç»™ç®¡ç†è€…ä½¿ç”¨çš„åå°ç®¡ç†ç³»ç»Ÿé¡µé¢ï¼ŒäºŒæ˜¯ç”¨æˆ·ä½¿ç”¨çš„å®¢æˆ·ç«¯é¡µé¢ã€‚å› æ­¤ï¼Œåœ¨æ–°å»ºé¡¹ç›®çš„æ—¶å€™æˆ‘ä»¬è¦å»ºç«‹ä¸¤ä¸ªå‰ç«¯é¡¹ç›®ï¼Œä»¥ä½œè€…æœ¬äººåˆ›å»ºçš„é¡¹ç›®ä¸ºä¾‹ï¼Œåå°ç®¡ç†ç³»ç»Ÿæ˜¯â€‹**hs-blog-admin-vueâ€‹**ï¼Œå®¢æˆ·ç«¯æ˜¯**hs-blog-user-vue**ã€‚ä½†ä¸ç®¡æ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯åå°ï¼Œä»–ä»¬åœ¨ä¸€å¼€å§‹çš„æ­å»ºæ­¥éª¤éƒ½æ˜¯ç›¸ä¼¼çš„ã€‚å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥é€‰æ‹©IDEï¼Œä½œè€…ä½¿ç”¨çš„æ˜¯WebStromã€‚å¦å¤–çš„é€‰æ‹©è¿˜æœ‰åƒVSCodeï¼Œæˆ–è€…å‰åç«¯å¹²è„†éƒ½ä½¿ç”¨IDEAä¹Ÿæ˜¯å¯ä»¥çš„ã€‚

### æ–°å»ºä¸€ä¸ªé¡¹ç›®

æ‰“å¼€webStormï¼Œæ–°å»ºproject

ä½ç½®è¦é€‰æ‹©åœ¨ä¸€ä¸ªæ–°å»ºçš„æ–‡ä»¶å¤¹ï¼Œå¦‚å›¾æ˜¯æ–°å»ºå®Œæˆåçš„é¡¹ç›®ç›®å½•

æŸ¥çœ‹å½“å‰nodeç‰ˆæœ¬ï¼Œå¦‚æœä¸æ˜¯22åˆ™ç”¨å‘½ä»¤ nvm use 22

ç„¶ååœ¨Terminalä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤

```plain
npm install
npm install vue-router@4
```

![åˆ›å»ºvueé¡¹ç›®](src/main/resources/static/images/frontend/create_vue_project.png)

æ‰§è¡Œå®Œæˆä»¥åï¼Œç‚¹å‡»å³ä¸Šè§’è¿è¡ŒæŒ‰é’®æˆ–è€…æ‰“å¼€Terminalè¾“å…¥npm run dev,å¦‚æœå‡ºç°vueçš„é»˜è®¤é¡µé¢ï¼Œå°±è¯´æ˜é¡¹ç›®æ–°å»ºæˆåŠŸäº†

![vueé¡¹ç›®é»˜è®¤é¡µ](src/main/resources/static/images/frontend/vueProject_defaultPage.png)

### åˆ é™¤æŸäº›æ–‡ä»¶ä»¥åŠæ–°å»ºä¸€äº›æ–‡ä»¶

åˆ é™¤å¦‚.gitignore, .vscodeè¿™äº›æ–‡ä»¶ï¼ˆå¤¹ï¼‰ï¼Œä»¥åŠcomponentsä¸­çš„æ–‡ä»¶å¤¹

å¹¶æŒ‰ç…§ä»¥ä¸‹ç›®å½•æ–°å»ºrouterï¼Œviewæ–‡ä»¶å¤¹ä»¥åŠé‡Œé¢çš„æ–‡ä»¶

![vueé¡¹ç›®ç›®å½•](src/main/resources/static/images/frontend/vue_directory.png)

### ä¿®æ”¹æ–‡ä»¶ä»£ç 

å°†å¯¹åº”æ–‡ä»¶çš„ä»£ç ä¿®æ”¹ä¸ºä»¥ä¸‹çš„ä»£ç 

ä¿®æ”¹å®Œæˆä»¥åé‡å¯é¡¹ç›®ï¼Œç”¨æµè§ˆå™¨è®¿é—®localhost:5174åº”è¯¥å¯ä»¥çœ‹åˆ°å¦‚ä¸‹é¡µé¢

![vueé¡¹ç›®ç›®å½•](src/main/resources/static/images/frontend/vue_helloWorld.png)

##### src/router/index.js

```plain
import { createRouter, createWebHistory } from 'vue-router'

const router = createRouter({
    history: createWebHistory(import.meta.env.BASE_URL),
    routes: [
        {
            path: '/',
            name: 'home',
            component: ()=>import( '../view/Home.vue'),
        }
    ]
})

export default router
```

##### src/view/Home.vue

```plain
<template>
  <div>
      Hello World!
  </div>
</template>
<script setup>

</script>
```

##### src/App.vue

```plain
<template>
  <RouterView />
</template>
```

##### src/main.js

```plain
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'

const app = createApp(App)
app.use(router)
app.mount('#app')
```

## åç«¯åˆå§‹æ­å»º

ä½œè€…ä½¿ç”¨çš„IDEæ˜¯IDEAï¼Œè™½ç„¶ç°åœ¨ç”¨Eclipseçš„æœ‹å‹åº”è¯¥æ²¡æœ‰å¤šå°‘äº†ï¼Œä½†ä½œè€…è¿˜æ˜¯æƒ³å¯¹è¿™äº›æœ‹å‹ä»¬æä¸€å¥ï¼Œä¸å¦¨æ¥è¯•è¯•ç”¨IDEAï¼Œä½¿ç”¨ä½“éªŒä¼šæ¯”Eclipseå¥½ä¸Šè®¸å¤šã€‚

åç«¯æ­å»ºåˆ†ä¸ºå‡ ä¸ªæ­¥éª¤ï¼Œæ–°å»ºé¡¹ç›®ï¼Œå¼•å…¥ä¾èµ–ï¼Œåˆ›å»ºé¡¹ç›®åŒ…ç»“æ„ï¼Œä¿®æ”¹è‡ªå·±çš„é…ç½®æ–‡ä»¶æ•°æ®ï¼Œåˆå§‹åŒ–mysqlï¼Œredisï¼Œè¯·çœ‹ä»¥ä¸‹éƒ¨åˆ†è¯¦ç»†è®²è§£ã€‚

### æ–°å»ºé¡¹ç›®å¹¶å¼•å…¥ä¾èµ–

æ–°å»ºé¡¹ç›®é€‰æ‹©Mavenä¾èµ–ï¼ŒSpringbootç‰ˆæœ¬è¦é€‰æ‹©3+
![IDEAé¡¹ç›®åˆ›å»º1](src/main/resources/static/images/backend/idea_project_create1.png)
![IDEAé¡¹ç›®åˆ›å»º2](src/main/resources/static/images/backend/idea_project_create2.png)

ç„¶åå¤åˆ¶ä»¥ä¸‹ä¾èµ–åˆ°pom.xmlæ–‡ä»¶ä¸­

```plain
<dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>com.mysql</groupId>
            <artifactId>mysql-connector-j</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>1.18.22</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus-spring-boot3-starter</artifactId>
            <version>3.5.11</version>
        </dependency>
        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus-jsqlparser</artifactId>
            <version>3.5.9</version>
        </dependency>
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>1.18.36</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.3.1</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
            <version>2.3.1</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-core</artifactId>
            <version>2.3.0</version>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-api</artifactId>
            <version>0.11.5</version>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-impl</artifactId>
            <version>0.11.5</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-jackson</artifactId>
            <version>0.11.5</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
        </dependency>
        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
            <version>RELEASE</version>
            <scope>compile</scope>
        </dependency>
        <!-- Knife4j æ ¸å¿ƒä¾èµ– -->
<!--        <dependency>-->
<!--            <groupId>com.github.xiaoymin</groupId>-->
<!--            <artifactId>knife4j-spring-boot-starter</artifactId>-->
<!--            <version>3.0.3</version>-->
<!--        </dependency>-->
        <!-- Spring Boot 3.x + OpenAPI 3.x -->
        <dependency>
            <groupId>com.github.xiaoymin</groupId>
            <artifactId>knife4j-openapi3-jakarta-spring-boot-starter</artifactId>
            <version>4.5.0</version>
        </dependency>
        <!-- Swagger 3 æ ¸å¿ƒä¾èµ– -->
        <dependency>
            <groupId>io.springfox</groupId>
            <artifactId>springfox-swagger2</artifactId>
            <version>3.0.0</version>
        </dependency>
        <!--  Hutoolå·¥å…·åŒ…  -->
        <dependency>
            <groupId>cn.hutool</groupId>
            <artifactId>hutool-all</artifactId>
            <version>5.8.16</version>
        </dependency>

        <!-- é˜¿é‡Œäº‘OSS SDK -->
        <dependency>
            <groupId>com.aliyun.oss</groupId>
            <artifactId>aliyun-sdk-oss</artifactId>
            <version>3.15.1</version>
        </dependency>
        <dependency>
            <groupId>com.aliyun</groupId>
            <artifactId>aliyun-java-sdk-core</artifactId>
            <version>4.6.3</version>
        </dependency>
        <!--   Redis   -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-redis</artifactId>
        </dependency>
        <!--   mail   -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-mail</artifactId>
        </dependency>
        <!--  security  -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
        </dependency>
    </dependencies>
```

### æ–°å»ºåŒ…ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶

æ–°å»ºåŒ…ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä¸è§„èŒƒæ¥åˆ›å»ºåŒ…ã€‚ æˆ‘åœ¨é¡¹ç›®ä¸­åˆ›å»ºçš„åŒ…å¦‚ä¸‹ï¼Œé™¤äº†sqlåŒ…ä»¥å¤–ï¼Œå…¶ä»–ä½ ä¹Ÿå¯ä»¥å‚è€ƒä»¥ä¸‹çš„ç›®å½•æ–°å»ºã€‚

* controlleråŒ…ä¸‹æˆ‘åˆç»†åˆ†ä¸º3ä¸ªåŒ…ï¼šadminï¼Œuserï¼Œcommonï¼Œç®¡ç†å‘˜ç«¯çš„æ¥å£æˆ‘ç»Ÿä¸€æ”¾åœ¨adminåŒ…ä¸‹ï¼Œå®¢æˆ·ç«¯æ¥å£æ”¾åœ¨äº†useråŒ…ä¸‹ï¼Œä¸€äº›é€šç”¨çš„ä¾‹å¦‚æ–‡ä»¶ä¸Šä¼ æ¥å£ï¼Œå°±æ”¾åœ¨commonä¸­ã€‚
* configåŒ…ä¸»è¦å­˜æ”¾é…ç½®æ–‡ä»¶ï¼Œå¦‚MyBatisPlusConfigï¼ŒRedisConfigç­‰ã€‚
* constantä¸»è¦å­˜æ”¾å¸¸é‡ç±»ï¼ŒMessageConstantã€‚
* contextä¸­çš„CustomUserDetailså’Œfilterä¸­çš„ç±»æ˜¯ä¸SpringSecurityä¸€èµ·ä½¿ç”¨çš„ï¼Œåç»­ä¼šä¸“é—¨è®²è§£ã€‚
* handleåŒ…ä¸­BlogViewEventHandlerçš„ä½œç”¨ï¼šå½“åšå®¢è¢«æµè§ˆæ—¶ï¼Œä¼šå‘å¸ƒä¸€ä¸ªBlogViewEventäº‹ä»¶ï¼ŒBlogViewEventHandlerç›‘å¬è¯¥äº‹ä»¶ï¼Œå¹¶é€šè¿‡å¼‚æ­¥æ–¹å¼å¢åŠ å¯¹åº”åšå®¢çš„æµè§ˆæ¬¡æ•°ã€‚è¿™ç§è®¾è®¡æ–¹å¼å®ç°äº†äº‹ä»¶é©±åŠ¨å’Œå¼‚æ­¥å¤„ç†ï¼Œæœ‰åŠ©äºæé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚
* pojoåŒ…ä¸­æ˜¯å®ä½“ç±»ï¼ŒDTOç±»ï¼ŒVOç±»ï¼Œå¦å¤–çš„eventåŒ…ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„pojoç±»ï¼Œä»–ä¸åšå®¢æµè§ˆæ—¶ç›‘å¬äº‹ä»¶æœ‰å…³ã€‚
* propertiesæ˜¯é…ç½®ç±»ï¼Œå…¶ä¸­AliyunOSSPropertiesä»application.ymlä¸­è¯»å–é…ç½®ï¼Œç„¶åæä¾›ç»™utilsåŒ…ä¸‹AliyunOSSUtilå·¥å…·ç±»ä½¿ç”¨ï¼Œç”¨äºåˆå§‹åŒ–OSSå®¢æˆ·ç«¯ã€‚æ­¤ç±»å­˜åœ¨çš„ä½œç”¨æ˜¯å°†æ•æ„Ÿé…ç½®é›†ä¸­ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤ï¼Œé€šè¿‡ç±»å‹å®‰å…¨çš„é…ç½®ç±»è®¿é—®é…ç½®ï¼Œé¿å…ç¡¬ç¼–ç 
* resultåŒ…ä¸‹æ˜¯å°è£…çš„ç»“æœç±»ï¼ŒResultæ˜¯æ¥å£çš„ç»Ÿä¸€è¿”å›ç»“æœç±»ã€‚
* utilsæ˜¯å·¥å…·ç±»ï¼ŒåŒ…æ‹¬JWTï¼Œé˜¿é‡Œäº‘OSSå·¥å…·ç±»ç­‰ã€‚

![åç«¯é¡¹ç›®ç›®å½•](src/main/resources/static/images/backend/idea_directory.png)

ä»¥ä¸‹æ˜¯application.ymlå†…å®¹ï¼Œè¯·æ‰‹åŠ¨ä¿®æ”¹è¿™äº›åœ°æ–¹ï¼šä½ çš„mysqlç”¨æˆ·å’Œå¯†ç ã€hostï¼ŒRediså¯†ç ã€hostï¼ŒQQé‚®ç®±ä¸æˆæƒç ï¼Œé˜¿é‡Œäº‘OSSçš„ä¿¡æ¯ã€‚

```plain
server:
  port: 8080
spring:
  application:
    name: hs-blog
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/hs-blog?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: root
    password: 123456
  servlet:
    multipart:
      # æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶é…ç½®
      max-file-size: 10MB
      max-request-size: 10MB
  # Redisé…ç½®
  redis:
    client:
      host: localhost          # Redis æœåŠ¡å™¨åœ°å€
      port: 6379               # Redis ç«¯å£
      password:
      timeout: 2000            # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      database: 0              # ä½¿ç”¨çš„ Redis æ•°æ®åº“ç´¢å¼•ï¼ˆé»˜è®¤ 0ï¼‰
  # é‚®ç®±ä¿¡æ¯é…ç½®
  mail:
    host: smtp.qq.com          # SMTP æœåŠ¡å™¨åœ°å€
    port: 465                  # SSL ç«¯å£
    username: # ä½ çš„QQé‚®ç®±      # å‘ä»¶é‚®ç®±
    password: # ä½ çš„é‚®ç®±æˆæƒç   # é‚®ç®±æˆæƒç ï¼ˆéé‚®ç®±å¯†ç ï¼‰
    protocol: smtps            # ä½¿ç”¨SMTP over SSL
    properties:
      mail:
        smtp:
          ssl:
            enable: true        # å¯ç”¨SSLåŠ å¯†
          auth: true           # å¯ç”¨è®¤è¯
          connectiontimeout: 5000  # è¿æ¥è¶…æ—¶æ—¶é—´(æ¯«ç§’)
          timeout: 3000        # è¯»å†™è¶…æ—¶æ—¶é—´(æ¯«ç§’)
          writetimeout: 5000   # å†™è¶…æ—¶æ—¶é—´(æ¯«ç§’)
# MyBatis-Plus é…ç½®
mybatis-plus:
  mapper-locations: classpath*:/mapper/**/*.xml  # XML æ–‡ä»¶ä½ç½®
  type-aliases-package: com.example.entity        # å®ä½“ç±»åŒ…è·¯å¾„
  configuration:
    map-underscore-to-camel-case: true            # å¼€å¯é©¼å³°å‘½åè½¬æ¢
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl  # æ‰“å° SQL æ—¥å¿—
  global-config:
    db-config:
      logic-delete-field: isDeleted  # é€»è¾‘åˆ é™¤å­—æ®µåï¼ˆéœ€ä¸å®ä½“ç±»å­—æ®µå¯¹åº”ï¼‰
      logic-delete-value: 1          # é€»è¾‘åˆ é™¤æ—¶è¯¥å­—æ®µçš„å€¼
      logic-not-delete-value: 0      # æœªåˆ é™¤æ—¶è¯¥å­—æ®µçš„å€¼
aliyun:
  oss:
    endpoint: #è¯·å¡«å†™
    access-key-id: #è¯·å¡«å†™
    access-key-secret: #è¯·å¡«å†™
    bucket-name: #è¯·å¡«å†™
```

### æ•°æ®åº“åˆå§‹åŒ–

**åœ¨æ­¤æ­¥éª¤ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å…¶ä»–å¯è§†åŒ–å·¥å…·å¦‚Navicat, SQLyogç­‰ï¼ŒåŒæ—¶ä½ ä¹Ÿå¯ä»¥å°è¯•ä¸‹IDEAè‡ªå¸¦çš„ï¼Œè¯·çœ‹ä»¥ä¸‹çš„æ“ä½œã€‚**

#### åœ¨IDEAä¸­è¿æ¥æ•°æ®åº“ï¼Œè¿è¡ŒSQLè„šæœ¬

**åœ¨IDEAå³ä¾§æ‰¾åˆ°DBï¼Œé€‰æ‹©æ·»åŠ æ•°æ®æºï¼Œæ‰¾åˆ°MySQL**

![](src/main/resources/static/images/backend/db_init1.png)
![](src/main/resources/static/images/backend/db_init2.png)

è¾“å…¥ä½ è‡ªå·±çš„è´¦å·å¯†ç ï¼ŒTest connectionå¦‚æœé€šè¿‡åˆ™ç›´æ¥è¿›è¡Œè¿æ¥
User: root
Password: 123456

![](src/main/resources/static/images/backend/db_init3.png)

å³å‡»æ•°æ®æºï¼Œè¿è¡ŒSQLè„šæœ¬ï¼Œè„šæœ¬ä½ç½®åœ¨sqlåŒ…ä¸‹ï¼Œå³ä¹‹å‰åˆ›å»ºåŒ…æ—¶æåˆ°è¿‡çš„ã€‚

![](src/main/resources/static/images/backend/db_init4.png)

![](src/main/resources/static/images/backend/db_init5.png)

ç­‰å¾…è„šæœ¬è¿è¡Œå®Œæˆä»¥åï¼Œå…ˆç‚¹å‡»æ•°æ®æºæ—è¾¹çš„ä½ç½®

é€‰æ‹©åˆšåˆšæ–°å»ºçš„æ–°æ•°æ®åº“ï¼Œæ­¤é¡¹ç›®æ˜¯hs-blogï¼Œæ‰“é’©å±•ç¤ºå‡ºæ¥

![](src/main/resources/static/images/backend/db_init6.png)

#### æé†’ï¼šè®°å¾—ä¿®æ”¹é¡¹ç›®applicaiton.ymlæ–‡ä»¶é…ç½®

æ‰¾åˆ°ymlæ–‡ä»¶é…ç½®mysqlçš„è´¦å·å¯†ç ã€‚

#### Redisé…ç½®

ä¸mysqlæ˜¯åŒæ ·çš„æ“ä½œï¼Œåœ¨å³ä¾§DBä¸­æ‰¾åˆ°Redisæ•°æ®æºæ·»åŠ ã€‚
ç„¶åè¾“å…¥ä½ çš„å¯†ç è¿æ¥ï¼Œç”±äºæˆ‘æ²¡æœ‰è®¾ç½®å¯†ç æ‰€ä»¥æ˜¯ç©ºçš„ã€‚
è®°å¾—åœ¨applicaiton.ymlä¹Ÿè¦ä¿®æ”¹ã€‚

# 

## æ•°æ®åº“è®¾è®¡

é¦–å…ˆæ˜¯ç”¨æˆ·è¡¨ï¼Œç®¡ç†å‘˜è¡¨ï¼Œè®°å½•äº†ä¸¤ä¸ªè§’è‰²å„è‡ªçš„åŸºæœ¬ä¿¡æ¯åŒ…æ‹¬ç”¨æˆ·åå¯†ç ç­‰...

ä½†å…³äºç”¨æˆ·è¡¨ï¼Œæƒé™ä¹‹é—´çš„è®¾è®¡æœ‰ä¸€ç§æ›´å¥½çš„è®¾è®¡æ–¹å¼ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å‚è€ƒæœ¬èŠ‚æœ€åéƒ¨åˆ†ã€‚æœ¬é¡¹ç›®ä¸­ç®€åŒ–äº†è¿™äº›è®¾è®¡ï¼ŒåªæŠŠä½¿ç”¨è€…åˆ†ä¸ºä¸¤ç±»ï¼Œç®¡ç†è€…å’Œç”¨æˆ·ï¼Œç®€å•çš„è®¾è®¡äº†æ•°æ®è¡¨ã€‚

åšå®¢è¡¨è®°å½•åšå®¢çš„åŸºæœ¬ä¿¡æ¯ï¼Œæ ‡é¢˜ï¼Œå‰¯æ ‡é¢˜ï¼Œä½œè€…ï¼Œå†…å®¹ç­‰...

å›¾ä¹¦è¡¨è®°å½•å›¾ä¹¦åŸºæœ¬ä¿¡æ¯ï¼Œæ ‡é¢˜å†…å®¹ç­‰...

ç»“åˆå‰é¢éœ€æ±‚åˆ†æé˜¶æ®µï¼Œå¯ä»¥åˆæ­¥è®¾è®¡å¦‚ä¸‹æ•°æ®åº“è¡¨

**(æ­¤å¤„å›¾ç‰‡å¾…è¡¥å……)**

### ç®¡ç†å‘˜è¡¨

* é¦–å…ˆæ˜¯è‡ªå¢çš„ä¸»é”®ï¼šç®¡ç†å‘˜id
* ç®¡ç†å‘˜çš„è´¦å·å’Œå¯†ç 
* åˆ›å»ºæ—¶é—´ï¼Œæ›´æ–°æ—¶é—´

```sql
CREATE TABLE `admin` (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `username` varchar(50) NOT NULL COMMENT 'ç®¡ç†å‘˜è´¦å·ï¼ˆå”¯ä¸€ï¼‰',
  `password` varchar(100) NOT NULL COMMENT 'åŠ å¯†åçš„å¯†ç ï¼ˆæ¨èBCryptåŠ å¯†ï¼‰',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´ï¼ˆè‡ªåŠ¨å¡«å……ï¼‰',
  `update_time` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰',
  `is_deleted` tinyint DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='ç®¡ç†å‘˜ä¿¡æ¯è¡¨';
```

### ç”¨æˆ·è¡¨

* ä¸»é”®ä¸ºè‡ªå¢çš„ç”¨æˆ·id
* ç”¨æˆ·è´¦å·å¯†ç 
* ç”¨æˆ·çš„é‚®ç®±
* å¤´åƒURL
* ç”µè¯
* é”å®šçŠ¶æ€
* æ³¨å†Œæ—¶é—´ï¼Œæ›´æ–°æ—¶é—´

```sql
CREATE TABLE `user` (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `username` varchar(50) DEFAULT (`email`) COMMENT 'ç”¨æˆ·è´¦å·',
  `password` varchar(100) NOT NULL COMMENT 'åŠ å¯†åçš„å¯†ç ',
  `email` varchar(100) NOT NULL COMMENT 'é‚®ç®±åœ°å€ï¼ˆå”¯ä¸€ï¼‰',
  `avatar_url` varchar(200) DEFAULT 'https://picsum.photos/seed/picsum/200/300' COMMENT 'å¤´åƒå›¾ç‰‡URL',
  `description` varchar(200) DEFAULT NULL COMMENT 'ä¸ªäººç­¾å',
  `phone` varchar(20) DEFAULT NULL COMMENT 'è”ç³»ç”µè¯',
  `lock_status` int DEFAULT '0' COMMENT 'é”å®šçŠ¶æ€ï¼ˆæœªé”å®šï¼š0ï¼Œé”å®šï¼š1ï¼‰',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'æ³¨å†Œæ—¶é—´',
  `update_time` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT 'æœ€åæ›´æ–°æ—¶é—´',
  `is_deleted` tinyint DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='ç”¨æˆ·ä¿¡æ¯è¡¨';
```

### åšå®¢è¡¨

* è‡ªå¢çš„åšå®¢id
* æ ‡é¢˜ï¼Œåšå®¢å†…å®¹
* åšå®¢ä½œè€…id
* åˆ†ç±»id
* åšå®¢çŠ¶æ€ï¼ˆè‰ç¨¿/å·²å‘å¸ƒï¼‰
* é”å®šçŠ¶æ€
* æµè§ˆé‡
* åšå®¢ç‚¹èµæ•°
* åšå®¢åˆ›å»ºæ—¶é—´ï¼Œæ›´æ–°æ—¶é—´

è¿™é‡Œè¯´ä¸€ä¸‹åˆ†ç±»idï¼Œæ¯ä¸€ç¯‡åšå®¢éœ€è¦è¢«åˆ†ç±»ä¸ºä¸€ä¸ªå…·ä½“çš„ç±»åˆ«ä¸‹ï¼Œä¾‹å¦‚ï¼š

è¿™ç¯‡å­¦ä¹ è´´è¢«åˆ†ç±»åœ¨ï¼šç¼–ç¨‹å­¦ä¹ ç±»åˆ« => Javaç±»åˆ«ä¸‹

```sql
CREATE TABLE `blog` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `title` varchar(200) NOT NULL COMMENT 'åšå®¢æ ‡é¢˜',
  `sub_title` varchar(200) DEFAULT NULL COMMENT 'å‰¯æ ‡é¢˜',
  `content` longtext NOT NULL COMMENT 'åšå®¢å†…å®¹ï¼ˆæ”¯æŒMarkdownæ ¼å¼ï¼‰',
  `user_id` int NOT NULL COMMENT 'ç”¨æˆ·ID',
  `category_id` int DEFAULT NULL COMMENT 'åˆ†ç±»ID',
  `status` int DEFAULT '0' COMMENT 'çŠ¶æ€ï¼šè‰ç¨¿0/å·²å‘å¸ƒ1',
  `lock_status` int DEFAULT '0' COMMENT 'é”å®šçŠ¶æ€',
  `view_count` int DEFAULT '0' COMMENT 'æµè§ˆæ¬¡æ•°',
  `like_count` int DEFAULT '0' COMMENT 'ç‚¹èµæ•°é‡',
  `star_count` int DEFAULT '0' COMMENT 'æ”¶è—æ•°é‡',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `is_deleted` tinyint DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `author_id` (`user_id`),
  KEY `category_id` (`category_id`),
  CONSTRAINT `blog_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`),
  CONSTRAINT `blog_ibfk_2` FOREIGN KEY (`category_id`) REFERENCES `blog_category` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='çŸ¥è¯†åšå®¢è¡¨';
```

### å›¾ä¹¦è¡¨

**å›¾ä¹¦çš„åˆ†ç±»å‚è€ƒä»¥ä¸‹ï¼šè±†ç“£é˜…è¯»çš„åˆ†ç±»æ–¹å¼**

[https://read.douban.com/ebooks/?dcs=book-nav&dcm=douban](https://read.douban.com/ebooks/?dcs=book-nav&dcm=douban)

**ISBNï¼Œä½œè€…ï¼Œå‡ºç‰ˆç¤¾ç­‰ä¿¡æ¯å¯ä»¥é€šè¿‡ä»¥ä¸‹æŸ¥è¯¢ï¼šZ-LIBï¼Œè±†ç“£è¯»ä¹¦**

[https://search.douban.com/book/subject\_search?search\_text=java&cat=1001](https://search.douban.com/book/subject_search?search_text=java&cat=1001)

[https://zh.1lib.su/s/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA?content\_type=book](https://zh.1lib.su/s/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA?content_type=book)

* å›¾ä¹¦ä¸»é”®id
* ISBNå·ï¼ˆä»¥ISBN13ä¸ºå‡†ï¼‰
* å›¾ä¹¦åç§°
* ä½œè€…
* å‡ºç‰ˆç¤¾
* å‡ºç‰ˆæ—¥æœŸ
* å°é¢å›¾ç‰‡URL
* ç”µå­ä¹¦å­˜å‚¨è·¯å¾„
* å›¾ä¹¦ç®€ä»‹
* åˆ†ç±»id
* ä¹¦ç±çŠ¶æ€ï¼ˆ0ï¼šä¸‹æ¶ï¼›1ï¼šä¸Šæ¶ï¼‰
* æµè§ˆæ¬¡æ•°ï¼Ÿä¸‹è½½æ¬¡æ•°ï¼Ÿ
* ä¸Šä¼ æ—¶é—´ï¼Œæ›´æ–°æ—¶é—´

```sql
CREATE TABLE `book` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `isbn` varchar(20) NOT NULL COMMENT 'å›½é™…æ ‡å‡†ä¹¦å·',
  `title` varchar(200) NOT NULL COMMENT 'å›¾ä¹¦æ ‡é¢˜',
  `author` varchar(100) NOT NULL COMMENT 'ä½œè€…/ç¼–è€…',
  `publisher` varchar(100) DEFAULT NULL COMMENT 'å‡ºç‰ˆç¤¾',
  `publish_date` date DEFAULT NULL COMMENT 'å‡ºç‰ˆæ—¥æœŸ',
  `cover_url` varchar(200) DEFAULT NULL COMMENT 'å°é¢å›¾ç‰‡URL',
  `file_path` varchar(200) DEFAULT NULL COMMENT 'ç”µå­ä¹¦å­˜å‚¨è·¯å¾„ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰',
  `description` text COMMENT 'å›¾ä¹¦ç®€ä»‹',
  `download_count` int DEFAULT '0' COMMENT 'ä¸‹è½½æ¬¡æ•°',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'ä¸Šä¼ æ—¶é—´',
  `update_time` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `category_id` int DEFAULT NULL COMMENT 'åˆ†ç±»ID',
  `status` int DEFAULT '1' COMMENT 'ä¹¦ç±çŠ¶æ€ï¼ˆ0ï¼šä¸‹æ¶ï¼›1ï¼šä¸Šæ¶ï¼‰',
  `is_deleted` tinyint DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `isbn` (`isbn`),
  KEY `book_book_category_id_fk` (`category_id`),
  CONSTRAINT `book_book_category_id_fk` FOREIGN KEY (`category_id`) REFERENCES `book_category` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=31 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='ç”µå­å›¾ä¹¦è¡¨';
```

### åšå®¢åˆ†ç±»è¡¨

* ç±»å‹id
* åˆ†ç±»åç§°
* çˆ¶åˆ†ç±»id

å­˜åœ¨çˆ¶ç±»åˆ«å’Œå­ç±»åˆ«ï¼Œä¾‹å¦‚ç¼–ç¨‹å­¦ä¹ æ˜¯é¡¶çº§åˆ†ç±»åˆ™æ²¡æœ‰parent\_idï¼Œç¼–ç¨‹å­¦ä¹ ç±»åˆ«ä¸‹çš„Javaç±»åˆ«åˆ™æ‹¥æœ‰parent\_idä¸ºç¼–ç¨‹å­¦ä¹ ç±»åˆ«çš„id

ç¼–ç¨‹å­¦ä¹ ç±»åˆ« => Javaç±»åˆ«

```sql
CREATE TABLE `blog_category` (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `name` varchar(50) NOT NULL COMMENT 'åˆ†ç±»åç§°',
  `parent_id` int DEFAULT NULL COMMENT 'çˆ¶åˆ†ç±»IDï¼ˆé¡¶çº§åˆ†ç±»ä¸ºNULLï¼‰',
  `create_time` datetime DEFAULT (now()) COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `parent_id` (`parent_id`),
  CONSTRAINT `blog_category_ibfk_1` FOREIGN KEY (`parent_id`) REFERENCES `blog_category` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='åšå®¢åˆ†ç±»è¡¨';
```

### å›¾ä¹¦åˆ†ç±»è¡¨

* ç±»å‹id
* åˆ†ç±»åç§°
* çˆ¶åˆ†ç±»id

```sql
CREATE TABLE `book_category` (
`id` int NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
`name` varchar(50) NOT NULL COMMENT 'åˆ†ç±»åç§°',
`parent_id` int DEFAULT NULL COMMENT 'çˆ¶åˆ†ç±»IDï¼ˆé¡¶çº§åˆ†ç±»ä¸ºNULLï¼‰',
`create_time` datetime DEFAULT (now()) COMMENT 'åˆ›å»ºæ—¶é—´',
`update_time` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
PRIMARY KEY (`id`),
KEY `parent_id` (`parent_id`),
CONSTRAINT `book_category_ibfk_1` FOREIGN KEY (`parent_id`) REFERENCES `book_category` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=95 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='å›¾ä¹¦åˆ†ç±»è¡¨';
```

### æ ‡ç­¾è¡¨(æš‚æœªä½¿ç”¨)

* æ ‡ç­¾id
* æ ‡ç­¾åç§°

```sql
CREATE TABLE tag (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
    name VARCHAR(50) UNIQUE NOT NULL COMMENT 'æ ‡ç­¾åç§°ï¼ˆå”¯ä¸€ï¼‰'
) COMMENT='å†…å®¹æ ‡ç­¾è¡¨';
```

### åšå®¢æ ‡ç­¾å…³è”è¡¨(æš‚æœªä½¿ç”¨)

* åšå®¢id
* æ ‡ç­¾id

åšå®¢ä¸æ ‡ç­¾æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œä¸€æ¡åšå®¢å¯èƒ½å¯¹åº”å¤šä¸ªæ ‡ç­¾ï¼Œå¤šä¸ªåšå®¢å¯èƒ½å¯¹åº”ä¸€ä¸ªæ ‡ç­¾

æ‰€ä»¥æˆ‘ä»¬è¦å»ºç«‹ä¸­é—´è¡¨

```sql
CREATE TABLE blog_tag (
    blog_id BIGINT NOT NULL COMMENT 'åšå®¢ID',
    tag_id INT NOT NULL COMMENT 'æ ‡ç­¾ID',
    PRIMARY KEY (blog_id, tag_id),
    FOREIGN KEY (blog_id) REFERENCES blog(id),
    FOREIGN KEY (tag_id) REFERENCES tag(id)
) COMMENT='åšå®¢ä¸æ ‡ç­¾å…³è”è¡¨';
```

### å›¾ä¹¦æ ‡ç­¾å…³è”è¡¨(æš‚æœªä½¿ç”¨)

```sql
CREATE TABLE book_tag (
    book_id BIGINT NOT NULL COMMENT 'å›¾ä¹¦ID',
    tag_id INT NOT NULL COMMENT 'æ ‡ç­¾ID',
    PRIMARY KEY (book_id, tag_id),
    FOREIGN KEY (book_id) REFERENCES book(id),
    FOREIGN KEY (tag_id) REFERENCES tag(id)
) COMMENT='å›¾ä¹¦ä¸æ ‡ç­¾å…³è”è¡¨';
```

### ç”¨æˆ·å…³æ³¨ï¼ˆç²‰ä¸ï¼‰å…³è”è¡¨

```sql
CREATE TABLE `user_follower` (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®',
  `user_id` int NOT NULL COMMENT 'åšä¸»ID',
  `follower_id` int NOT NULL COMMENT 'ç²‰ä¸ID',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'å…³æ³¨æ—¶é—´',
  PRIMARY KEY (`id`),
  KEY `idx_user_follower` (`user_id`,`follower_id`),
  KEY `fk_user_follower_follower` (`follower_id`),
  CONSTRAINT `fk_user_follower_follower` FOREIGN KEY (`follower_id`) REFERENCES `user` (`id`),
  CONSTRAINT `fk_user_follower_user` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='ç”¨æˆ·å…³æ³¨ï¼ˆç²‰ä¸ï¼‰å…³ç³»è¡¨';
```

### åšå®¢è¯„è®ºè¡¨(æš‚æœªä½¿ç”¨)

* è¯„è®ºid
* è¯„è®ºå†…å®¹
* è¯„è®ºçš„ç”¨æˆ·id
* è¯¥è¯„è®ºå…³è”çš„åšå®¢id
* è¯„è®ºåˆ›å»ºæ—¶é—´ï¼Œæ›´æ–°æ—¶é—´

```sql
CREATE TABLE blog_comment (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
    content TEXT NOT NULL COMMENT 'è¯„è®ºå†…å®¹',
    user_id INT NOT NULL COMMENT 'è¯„è®ºäººID',
    blog_id BIGINT NOT NULL COMMENT 'å…³è”åšå®¢ID', 
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'è¯„è®ºæ—¶é—´',
    updated_time DATETIME ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
) COMMENT='åšå®¢è¯„è®ºè¡¨';
```

### ç”¨æˆ·åšå®¢ç‚¹èµè¡¨

```sql
CREATE TABLE `user_blog_like` (
  `user_id` int NOT NULL COMMENT 'ç”¨æˆ·ID',
  `blog_id` bigint NOT NULL COMMENT 'åšå®¢ID',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `is_deleted` tinyint DEFAULT '0' COMMENT 'é€»è¾‘åˆ é™¤æ ‡è®°ï¼ˆ0:æœªåˆ é™¤ 1:å·²åˆ é™¤ï¼‰',
  PRIMARY KEY (`user_id`,`blog_id`),
  KEY `blog_id` (`blog_id`),
  CONSTRAINT `user_blog_like_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `user_blog_like_ibfk_2` FOREIGN KEY (`blog_id`) REFERENCES `blog` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='ç”¨æˆ·åšå®¢ç‚¹èµè¡¨';
```

### ç”¨æˆ·åšå®¢æ”¶è—è¡¨

```sql
CREATE TABLE `user_blog_star` (
  `user_id` int NOT NULL COMMENT 'ç”¨æˆ·ID',
  `blog_id` bigint NOT NULL COMMENT 'åšå®¢ID',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `is_deleted` tinyint DEFAULT '0' COMMENT 'é€»è¾‘åˆ é™¤æ ‡è®°ï¼ˆ0:æœªåˆ é™¤ 1:å·²åˆ é™¤ï¼‰',
  PRIMARY KEY (`user_id`,`blog_id`),
  KEY `blog_id` (`blog_id`),
  CONSTRAINT `user_blog_star_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `user_blog_star_ibfk_2` FOREIGN KEY (`blog_id`) REFERENCES `blog` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='ç”¨æˆ·åšå®¢æ”¶è—è¡¨';
```

### ç”¨æˆ·å›¾ä¹¦æ”¶è—è¡¨

```sql
CREATE TABLE `user_book` (
  `user_id` bigint NOT NULL COMMENT 'ç”¨æˆ· ID',
  `book_id` bigint NOT NULL COMMENT 'å›¾ä¹¦ ID',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`user_id`,`book_id`),
  KEY `idx_book_id` (`book_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='ç”¨æˆ·å›¾ä¹¦æ”¶è—è¡¨';
```

### å¦ä¸€ç§ç”¨æˆ·-æƒé™è®¾è®¡

ä¸€ä¸ªç”¨æˆ·å¯èƒ½ä¼šæœ‰å¤šç§è§’è‰²ï¼Œå¤šä¸ªç”¨æˆ·ä¹Ÿå¯èƒ½åªå¯¹åº”ä¸€ä¸ªè§’è‰²ã€‚åŒæ ·çš„ä¸€ä¸ªè§’è‰²å¯èƒ½æ‹¥æœ‰å¤šä¸ªæƒé™ï¼Œå¤šä¸ªè§’è‰²å¯èƒ½åªæ‹¥æœ‰å…¶ä¸­ä¸€ç§æƒé™ã€‚å› æ­¤ï¼Œåœ¨ç”¨æˆ·-è§’è‰²ä¹‹é—´ï¼Œè§’è‰²-æƒé™ä¹‹é—´éƒ½éœ€è¦å»ºç«‹ä¸€ä¸ªå¤šå¯¹å¤šä¸­é—´è¡¨ï¼Œæ¥æè¿°ä»–ä»¬ä¹‹é—´çš„å…³ç³»ã€‚è¿™æ ·ä¸‹æ¥æ€»å…±éœ€è¦åˆ›å»ºäº”å¼ è¡¨ã€‚

![ç”¨æˆ·-æƒé™è®¾è®¡å›¾](src/main/resources/static/images/backend/auth_design.png "æ¥æºCSDN: blog.csdn.net/m0_74436895/article/details/140998480")

## sqlæ–‡ä»¶å¯¼å‡º

å³é”®æ•°æ®åº“ï¼Œé€‰æ‹©Export with mysqldump
å¯ä»¥è‡ªå·±æ”¹ä¸‹å¯¼å‡ºæ—¶çš„åå­—

![SQLæ–‡ä»¶å¯¼å‡º1](src/main/resources/static/images/backend/dump_db1.png)
![SQLæ–‡ä»¶å¯¼å‡º2](src/main/resources/static/images/backend/dump_db2.png)

## æŸ¥çœ‹sqlå…³ç³»å›¾

å³é”®æ•°æ®åº“ï¼Œé€‰æ‹©Show Diagram

![æŸ¥çœ‹SQLå…³ç³»å›¾1](src/main/resources/static/images/backend/show_diagram1.png)
![æŸ¥çœ‹SQLå…³ç³»å›¾2](src/main/resources/static/images/backend/show_diagram2.png)

